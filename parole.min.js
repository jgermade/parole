!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):e.Parole=n()}(this,function(){function e(e){for(var n=0,t=e.length;n<t;n++)e[n]()}var n="object"==typeof process&&"function"==typeof process.nextTick?process.nextTick:function(e,n){for(var t=n.length-1;t>=0;t--)if(window[n[t]+"equestAnimationFrame"])return window[n[t]+"equestAnimationFrame"].bind(e);return e.setImmediate?e.setImmediate:"MutationObserver"in e?(o=document.createTextNode(""),function(e){var n=new MutationObserver(function(){e(),n.disconnect()});n.observe(o,{characterData:!0}),o.data=!1}):e.setTimeout;var o}("object"==typeof window?window:this,"oR msR mozR webkitR r".split(" "));function t(e){return"object"==typeof e||"function"==typeof e}function o(e){return t(e)&&"then"in e}function i(e,n,o,r,u){var f,c;if(n&&t(n))try{if(n===e)throw new TypeError("A promise can not be resolved by itself");f=n.then,o&&"function"==typeof f?function(e,n,t,o,i,r){try{e.call(o,function(e){n(t,e,!0,i,r)},function(e){n(t,e,!1,i,r)})}catch(e){n(t,e,!1,i,r)}}(f,(c=i,function(){c&&c.apply(this,arguments),c=null}),e,n,r,u):(o?r:u)(n)}catch(e){u(e)}else(o?r:u)(n)}function r(t){if(!(this instanceof r))return new r(t);var o=this,u=function(t){o.fulfilled||o.rejected||(o.rejected=!0,o.value=t,n(function(){e(o.queue)}))};o.queue=[],t(function(t){i(o,t,!0,function(t){o.fulfilled||o.rejected||(o.fulfilled=!0,o.value=t,n(function(){e(o.queue)}))},u)},u)}return r.prototype.then=function(e,t){var o=this;return new r(function(i,r){function u(){var n=o.fulfilled?e:t;if("function"==typeof n)try{i(n(o.value))}catch(e){r(e)}else o.fulfilled?i(o.value):r(o.value)}o.fulfilled||o.rejected?n(u):o.queue.push(u)})},r.prototype.catch=function(e){return this.then(null,e)},r.defer=function(){var e={};return e.promise=new r(function(n,t){e.resolve=n,e.reject=t}),e},r.when=function(e){return e&&e.then?e:r.resolve(e)},r.resolve=function(e){return new r(function(n){n(e)})},r.reject=function(e){return new r(function(n,t){t(e)})},r.all=function(e){var n=e.length;return new r(function(t,i){var r=new Array(n);e.forEach(function(e,u){var f=function(e){r[u]=e,--n||t(r)};o(e)?e.then.call(e,f,i):f(e)}),r.length||t(r)})},r.race=function(e){return new r(function(n,t){e.forEach(function(e){o(e)?e.then.call(e,n,t):n(e)}),e.length||n()})},r});