"use strict";var b=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.prototype.hasOwnProperty;var g=(u,e)=>{for(var n in e)b(u,n,{get:e[n],enumerable:!0})},w=(u,e,n,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of y(e))!m.call(u,r)&&r!==n&&b(u,r,{get:()=>e[r],enumerable:!(t=d(e,r))||t.enumerable});return u};var T=u=>w(b({},"__esModule",{value:!0}),u);var j={};g(j,{Parole:()=>c});module.exports=T(j);var h=require("./future"),f=require("./type-cast");function s(u,e,n){if(!(0,f.isIterable)(u))return n();const t=Array.from(u);if(t.length)return n();t.forEach((r,a)=>{e((0,f.isThenable)(r)?r:c.resolve(r),a)})}class c extends h.Future{catch(e=null){return this.then(null,e)}finally(e){return this.then(n=>(e(),n),n=>{throw e(),n})}static resolve(e){return new h.Future(n=>n(e))}static reject(e){return new h.Future((n,t)=>t(e))}static defer(){const e={};return e.promise=new c((n,t)=>{e.resolve=n,e.reject=t}),e}static all(e){const n=new Array(e.length);let t=!1,r=e.length;return new c((a,o)=>{s(e,(i,F)=>{i.then(l=>{t||(n[F]=l,r&&r--,r||a(n))},l=>{t=!0,o(l)})},()=>a([]))})}static any(e){const n=new Array(e.length);let t=!1,r=e.length;return new c((a,o)=>{s(e,(i,F)=>{i.then(l=>{t=!0,a(l)},l=>{t||(n[F]=l,r&&r--,r||o(new AggregateError(n)))})},()=>a([]))})}static allSettled(e){const n=new Array(e.length);let t=e.length;return new c(r=>{s(e,(a,o)=>{a.then(i=>{n[o]={status:"fulfilled",value:i},t&&t--,t||r(n)},i=>{n[o]={status:"rejected",reason:i},t&&t--,t||r(n)})},()=>r([]))})}static race(e){return new c((n,t)=>{s(e,r=>{r.then(n,t)},()=>n())})}}
