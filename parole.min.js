!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):n.Parole=e()}(this,function(){function n(n){return("object"==typeof n||n instanceof Function)&&"then"in n}function e(n,e,t,o,i){if("function"==typeof n)try{o(n(t))}catch(n){i(n)}else e?o(t):i(t)}function t(n,e,t,i,f){var u=!1;try{n.call(t,function(n){u||(u=!0,o(e,n,!0,i,f))},function(n){u||(u=!0,o(e,n,!1,i,f))})}catch(n){if(u)return;o(e,n,!1,i,f)}}function o(n,e,o,i,f){var u;if(!e||"object"!=typeof e&&"function"!=typeof e)(o?i:f)(e);else try{if(e===n)throw new TypeError("A promise can not be resolved by itself");u=e.then,o&&"function"==typeof u?t(u,n,e,i,f):(o?i:f)(e)}catch(n){f(n)}}function i(n){if(!(this instanceof i))return new i(n);var e=this,t=function(n,t,o){e.completed||(e.completed=!0,e.fulfilled=n,e.value=t,f(function(){for(var n=0,e=o.length;n<e;n++)o[n]()},0))},u=function(n){t(!1,n,e.queue)};e.queue=[],n(function(n){o(e,n,!0,function(n){t(!0,n,e.queue)},u)},u)}var f="object"==typeof process&&"function"==typeof process.nextTick?process.nextTick:function(n,e,t,o){for(t=e.length-1;t>=0;t--)if((o=n[e[t++]+"equestAnimationFrame"])instanceof Function)return o;return n.setImmediate||n.setTimeout}("object"==typeof window?window:this,"oR msR mozR webkitR r".split(" "));return i.prototype.then=function(n,t){var o=this;return new i(function(i,u){function c(){e(o.fulfilled?n:t,o.fulfilled,o.value,i,u)}o.completed?f(c):o.queue.push(c)})},i.prototype.catch=function(n){return this.then(null,n)},i.defer=function(){var n={};return n.promise=new i(function(e,t){n.resolve=e,n.reject=t}),n},i.when=function(n){return n&&n.then?n:i.resolve(n)},i.resolve=function(n){return new i(function(e){e(n)})},i.reject=function(n){return new i(function(e,t){t(n)})},i.all=function(e){var t=e.length;return new i(function(o,i){var f=new Array(t);e.forEach(function(e,u){var c=function(n){f[u]=n,--t||o(f)};n(e)?e.then.call(e,c,i):c(e)})})},i.race=function(e){return new i(function(t,o){e.forEach(function(e){n(e)?e.then.call(e,t,o):t(e)})})},i});