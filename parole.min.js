!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.Parole=n()}(this,function(){"use strict";function e(e){for(var n=0,t=e.length;n<t;n++)e[n]()}var n="object"!=typeof window?"object"==typeof process&&"function"==typeof process.nextTick&&process.nextTick||"object"==typeof global&&(global.setInmediate||global.setTimeout):function(e,n){for(var t=n.length-1;t>=0;t--)if(e[n[t]+"equestAnimationFrame"])return e[n[t]+"equestAnimationFrame"].bind(e);return"MutationObserver"in e?(o=document.createTextNode(""),function(e){var n=new MutationObserver(function(){e(),n.disconnect()});n.observe(o,{characterData:!0}),o.data=!1}):e.setImmediate||e.setTimeout;var o}(window,"oR msR mozR webkitR r".split(" "));function t(e){return"object"==typeof e||"function"==typeof e}function o(e){return t(e)&&"then"in e}function u(e,n,o,i,r){var c,f;if(n&&t(n))try{if(n===e)throw new TypeError("A promise can not be resolved by itself");c=n.then,o&&"function"==typeof c?function(e,n,t,o,u,i){try{e.call(o,function(e){n(t,e,!0,u,i)},function(e){n(t,e,!1,u,i)})}catch(e){n(t,e,!1,u,i)}}(c,(f=u,function(){f&&f.apply(this,arguments),f=null}),e,n,i,r):(o?i:r)(n)}catch(e){r(e)}else(o?i:r)(n)}function i(t){if(!(this instanceof i))return new i(t);var o=this,r=function(t){o.fulfilled||o.rejected||(o.rejected=!0,o.value=t,n(function(){e(o.queue)}))};o.queue=[],t(function(t){u(o,t,!0,function(t){o.fulfilled||o.rejected||(o.fulfilled=!0,o.value=t,n(function(){e(o.queue)}))},r)},r)}return i.prototype.then=function(e,t){var o=this;return new i(function(u,i){function r(){var n=o.fulfilled?e:t;if("function"==typeof n)try{u(n(o.value))}catch(e){i(e)}else o.fulfilled?u(o.value):i(o.value)}o.fulfilled||o.rejected?n(r):o.queue.push(r)})},i.prototype.catch=function(e){return this.then(null,e)},i.defer=function(){var e={};return e.promise=new i(function(n,t){e.resolve=n,e.reject=t}),e},i.when=function(e){return e&&e.then?e:i.resolve(e)},i.resolve=function(e){return new i(function(n){n(e)})},i.reject=function(e){return new i(function(n,t){t(e)})},i.all=function(e){var n=e.length;return new i(function(t,u){var i=new Array(n);e.forEach(function(e,r){var c=function(e){i[r]=e,--n||t(i)};o(e)?e.then.call(e,c,u):c(e)}),i.length||t(i)})},i.race=function(e){return new i(function(n,t){e.forEach(function(e){o(e)?e.then.call(e,n,t):n(e)}),e.length||n()})},i});