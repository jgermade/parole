"use strict";var F=Object.defineProperty;var I=Object.getOwnPropertyDescriptor;var N=Object.getOwnPropertyNames;var b=Object.prototype.hasOwnProperty;var j=(t,n)=>{for(var i in n)F(t,i,{get:n[i],enumerable:!0})},C=(t,n,i,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let a of N(n))!b.call(t,a)&&a!==i&&F(t,a,{get:()=>n[a],enumerable:!(r=I(n,a))||r.enumerable});return t};var R=t=>C(F({},"__esModule",{value:!0}),t);var J={};j(J,{defer:()=>T});module.exports=R(J);var h=require("./nextTick"),u=require("./type-cast"),d=(r=>(r.PENDING="PENDING",r.FULFILLED="FULFILLED",r.REJECTED="REJECTED",r))(d||{});const{PENDING:G,FULFILLED:p,REJECTED:y}=d;function T(){let t,n=G,i=[],r=[];const a={then(e=null,c=null){const{resolve:o,reject:l,promise:D}=T(),v=(0,u.isFunction)(e)?s=>{try{o(e(s))}catch(E){l(E)}}:s=>o(s),L=(0,u.isFunction)(c)?s=>{try{o(c(s))}catch(E){l(E)}}:s=>l(s);return n===p?(0,h.nextTick)(()=>v(t)):n===y?(0,h.nextTick)(()=>L(t)):(i==null||i.push(v),r==null||r.push(L)),D}};function f(e,c){t=e,n=c,(0,h.nextTick)(()=>{const o=c===p?i:r;i=null,r=null,o==null||o.forEach(l=>{try{l(t)}catch(D){}})})}function m(e){let c=!1;try{if(e===a)throw new TypeError("resolve value is the promise itself");const o=e&&((0,u.isObject)(e)||(0,u.isFunction)(e))&&e.then;if((0,u.isFunction)(o))o.call(e,l=>{c||(c=!0,m(l))},l=>{c||(c=!0,f(l,y))});else{if(c)return;f(e,p)}}catch(o){if(c)return;f(o,y)}}return{promise:a,resolve:m,reject(e){f(e,y)}}}
