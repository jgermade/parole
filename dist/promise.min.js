
// lib/promise-browser.js
!function e(n,r,t){function o(u,f){if(!r[u]){if(!n[u]){var c="function"==typeof require&&require;if(!f&&c)return c(u,!0);if(i)return i(u,!0);var l=new Error("Cannot find module '"+u+"'");throw l.code="MODULE_NOT_FOUND",l}var s=r[u]={exports:{}};n[u][0].call(s.exports,function(e){var r=n[u][1][e];return o(r?r:e)},s,s.exports,e,n,r,t)}return r[u].exports}for(var i="function"==typeof require&&require,u=0;u<t.length;u++)o(t[u]);return o}({1:[function(e,n,r){(function(n){"function"==typeof define&&define.amd?define(["$q"],function(){return e("./q")}):n.$q=e("./q")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./q":4}],2:[function(e,n,r){n.exports=function(e){function n(e,n){for(var r=0,t=e.length;t>r;r++)n(e[r],r)}return e.defer||(e.defer=function(){var n={};return n.promise=new e(function(e,r){n.resolve=e,n.reject=r}),n}),e.all||(e.all=function(r){return new e(function(t,o){var i=r.length,u=[];n(r,function(n,r){(n.then?n:e.resolve(n)).then(function(e){u[r]=e,0===--i&&t(u)},function(e){-1!==i&&o(e)})})})}),e.race||(e.race=function(r){return new e(function(t,o){var i=!1;n(r,function(n,r){i||(n.then?n:e.resolve(n)).then(function(e){i||(i=!0,t(e))},function(e){i||(i=!0,o(e))})})})}),e.resolve||(e.resolve=function(n){return new e(function(e,r){e(n)})}),e.reject||(e.reject=function(n){return new e(function(e,r){r(n)})}),e}},{}],3:[function(e,n,r){function t(e,n,r){n&&n.then?n.then(function(n){e.deferred.resolve(n)},function(n){e.deferred.reject(n)}):e.deferred[r](n)}function o(e){if(void 0!==e.$$succeeded){for(var n=(e.$$queue.length,e.$$queue.shift()),r=e.$$succeeded?"resolve":"reject",o=!e.$$succeeded&&e.$$uncought++;n;){if(n[r]){o=!1;try{t(n,n[r](e.$$value),"resolve")}catch(i){t(n,i,"reject")}}else t(n,e.$$value,r);n=e.$$queue.shift()}if(!e.$$succeeded&&o&&e.$$uncough===o)throw new Error("Uncaught (in promise)")}}function i(e){if(!(e instanceof Function))throw new TypeError("Promise resolver undefined is not a function");var n=this;this.$$queue=[],this.$$uncough=0;try{e(function(e){n.$$succeeded=!0,n.$$value=e,o(n)},function(e){n.$$succeeded=!1,n.$$value=e,o(n)})}catch(r){n.$$succeeded=!1,n.$$value=r,o(n)}}i.prototype.then=function(e,n){var r=this,t=new i(function(t,o){r.$$queue.push({resolve:e,reject:n,deferred:{resolve:t,reject:o}})});return o(this),t},i.prototype["catch"]=function(e){return this.then(void 0,e)},e("./promise-methods")(i),n.exports=i},{"./promise-methods":2}],4:[function(e,n,r){(function(r){n.exports=e("./qizer")(r.Promise?e("./promise-methods")(r.Promise):e("./promise-polyfill"))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./promise-methods":2,"./promise-polyfill":3,"./qizer":5}],5:[function(e,n,r){n.exports=function(n){function r(e){return new n(e)}return["defer","resolve","reject","all","race"].forEach(function(e){r[e]=n[e]}),r.when=function(e){return e&&e.then?e:n.resolve(e)},r.usePolyfill=function(){n=e("./promise-polyfill"),["defer","resolve","reject","all","race"].forEach(function(e){r[e]=n[e]})},r}},{"./promise-polyfill":3}]},{},[1]);